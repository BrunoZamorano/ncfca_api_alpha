status: pending

# Introduzir ConfigModule global com envFilePath

## Objetivo
Centralizar o carregamento de variáveis de ambiente usando `@nestjs/config`, habilitando `envFilePath` dinâmico com base em `NODE_ENV` para alternar entre `.env` e `.env.test`.

## Arquivos e caminhos (criar/editar)
- Editar: `src/app.module.ts`
- Instalar dependência: `@nestjs/config`

## Contratos e estruturas
N/A (somente infraestrutura de configuração).

## Regras de negócio e validações
- O `ConfigModule` deve ser global (`isGlobal: true`).
- O `envFilePath` deve resolver para `.env.test` quando `process.env.NODE_ENV === 'test'`; caso contrário, `.env`.
- O `ConfigModule` deve ser importado antes dos módulos que consomem `process.env` ou `ConfigService`.

## Passo a passo
1. Instalar a dependência: `pnpm add @nestjs/config`
2. Em `src/app.module.ts`, importar e configurar:
   - `ConfigModule.forRoot({ isGlobal: true, envFilePath: process.env.NODE_ENV === 'test' ? '.env.test' : '.env' })`
   - Garantir que este import esteja no topo da lista de imports.
3. Confirmar que a aplicação inicializa sem erros em ambos os contextos: `NODE_ENV=development` e `NODE_ENV=test`.

## Critérios de aceite (checáveis)
- Ao iniciar em `NODE_ENV=test`, `ConfigService.get('RABBITMQ_URL')` aponta para o valor de `.env.test` (local), não para o `.env` (CloudAMQP).
- `ConfigModule` presente como global e disponível em qualquer provider via `ConfigService`.
- `pnpm test:e2e` (após Task 03) não depende mais da flag `--env-file`.

## Testes mínimos (âncoras)
- Quick-check: criar app de teste com `Test.createTestingModule({ imports: [AppModule] })`, obter `ConfigService` e validar `get('NODE_ENV') === 'test'` e `get('RABBITMQ_URL')` do `.env.test`.

## Notas de versão/refs do Context7
- NestJS `@nestjs/config` v3, idiomático para Nest v11.

