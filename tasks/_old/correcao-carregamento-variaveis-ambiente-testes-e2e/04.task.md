status: done

# 04 — Atualizar Script de Teste e Verificar a Solução

## Objetivo
Finalizar a implementação atualizando o script de teste E2E para utilizar o novo mecanismo de configuração e verificar se a solução funciona conforme o esperado.

## Arquivos e Caminhos
- `package.json` (modificar)

## Passo a Passo
1.  Abra o arquivo `package.json`.
2.  Localize a seção `scripts` e encontre a chave `test:e2e`.
3.  Substitua o comando existente pelo seguinte:
    ```json
    "test:e2e": "NODE_ENV=test jest --config ./test/jest-e2e.json"
    ```
    - **Justificativa:** A flag `node --env-file=.env.test` se torna redundante. A aplicação agora lê a variável `NODE_ENV=test` e o `ConfigModule` se encarrega de carregar o arquivo `.env.test`.

4.  **Verificação da Solução:** Este é o passo mais crítico para validar a correção.
    - **Cenário 1 (RabbitMQ Desligado):**
        - Certifique-se de que sua instância local do RabbitMQ (Docker ou local) esteja **completamente parada**.
        - Execute o comando `pnpm run test:e2e`.
        - **Resultado Esperado:** Os testes que dependem da conexão com o RabbitMQ (como o `approve-club-request.e2e-spec.ts`) devem **falhar** com um erro de conexão (`connect ECONNREFUSED`). Isso prova que os testes estão corretamente tentando se conectar ao `localhost` definido no `.env.test`.

    - **Cenário 2 (RabbitMQ Ligado):**
        - Inicie sua instância local do RabbitMQ.
        - Execute o comando `pnpm run test:e2e` novamente.
        - **Resultado Esperado:** Todos os testes devem passar com sucesso.

## Critérios de Aceite
- O script `test:e2e` no `package.json` foi atualizado conforme a especificação.
- A verificação no Cenário 1 (RabbitMQ Desligado) resulta em falha por erro de conexão.
- A verificação no Cenário 2 (RabbitMQ Ligado) resulta na execução bem-sucedida de todos os testes.

## Testes Mínimos
- A própria execução dos passos de verificação serve como teste mínimo para esta tarefa.
- pnpm build
- pnpm test:e2e