status: pending

Título curto
- Setup e suíte (E2E) ClubManagement

Objetivo
- Criar a pasta `test/club-management/` e a suíte base `(E2E) ClubManagement`, replicando o padrão de bootstrap dos testes em `test/club-request` (app Nest, `ValidationPipe`, autenticação via login) e utilitários de criação/limpeza. Não validar regras ainda — apenas estrutura e smoke test.

Arquivos e caminhos (criar/editar)
- Criar: `test/club-management/club-management.setup.e2e-spec.ts` (bootstrap compartilhado e smoke test)

Contratos e estruturas (DTOs/entities/interfaces e campos)
- Utilizar `AppModule` para inicializar a aplicação.
- Utilizar `PrismaService` para interagir com o banco em testes.
- Utilizar utilitário `test/utils/prisma/create-test-user.ts` para criar usuários.
- Utilizar `test/utils/prisma/cleanup.ts` para cleanup cirúrgico por `userId`.

Regras de negócio e validações
- Sem validações de regra nesta task; apenas garantir que a suíte inicia, autentica e consegue atingir uma rota protegida (ex.: 404 autenticado).

Passo a passo
1. Criar diretório `test/club-management/`.
2. Implementar arquivo `club-management.setup.e2e-spec.ts` com:
   - `beforeAll`: `Test.createTestingModule({ imports: [AppModule] })`, `app.useGlobalPipes(new ValidationPipe({ whitelist: true, forbidNonWhitelisted: true }))`, `app.init()`.
   - Criar usuário teste com role `UserRoles.DONO_DE_CLUBE` via `createTestUser(emailRand, [UserRoles.DONO_DE_CLUBE], prisma, app)`; armazenar `userId` e `accessToken` em variáveis locais do teste.
   - `afterAll`: executar `surgicalCleanup(prisma, [userId])` e `app.close()`.
   - Smoke: efetuar `GET /club-management/my-club` autenticado e aceitar `404` (se não existir clube) ou `200` (se você decidir criar um clube no setup). Não forçar semântica nesta task.

Critérios de aceite (checáveis)
- Pasta `test/club-management/` criada.
- Suíte principal nomeada como `describe('(E2E) ClubManagement', ...)`.
- Setup com `ValidationPipe` e autenticação funcional (login retorna token e é usado em uma chamada autenticada).
- Limpeza cirúrgica em `afterAll` usando apenas o `userId` criado na suíte.

Testes mínimos (âncoras de teste)
- Smoke: `it('Deve inicializar a aplicação e autenticar com sucesso', ...)`.

Notas de versão/refs do Context7 (curtas)
- NestJS v11.1.x; Jest v30; Supertest v7.1; Prisma v6.13.0 (vide `package.json`).
- Padrões: `AI/rules/test.standards.yml` (Arrange–Act–Assert, independência, cleanup cirúrgico, nomenclatura `(E2E)`).

