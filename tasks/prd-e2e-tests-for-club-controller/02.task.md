status: completed

# Task 02 — Implementar Testes E2E para a Rota de Busca de Clubes (GET /club)

## Objetivo
Validar o comportamento do endpoint `GET /club`, garantindo que a busca, a paginação e os filtros funcionem conforme o esperado. Os testes devem cobrir cenários de sucesso e casos onde nenhum resultado é encontrado.

## Arquivos e Caminhos
- **Criar arquivo:** `test/club/search-clubs.e2e-spec.ts`
- **Usar setup:** `test/club/setup.ts`

## Passo a Passo
1.  Crie o arquivo `test/club/search-clubs.e2e-spec.ts`.
2.  Importe as funções necessárias do `setup.ts` (`setupClubApp`, `createTestUser`, `createTestClub`, `clubCleanup`).
3.  Estruture o `describe('(E2E) SearchClubs', ...)` com `beforeAll` para setup e `afterAll` para cleanup.
4.  No `beforeAll`, crie alguns usuários e clubes de teste com dados variados (nomes e localizações diferentes) para permitir testes de filtro.
5.  Implemente os testes usando o padrão Arrange-Act-Assert.

## Testes Mínimos
- **`Deve retornar uma lista paginada de clubes`**
  - **Arrange:** Crie múltiplos clubes.
  - **Act:** Faça uma requisição `GET /club` sem parâmetros.
  - **Assert:** Verifique se o status é `200`. Valide a estrutura da resposta (`data`, `total`, `page`, `limit`) e se `data` é um array.

- **`Deve filtrar clubes pelo nome`**
  - **Arrange:** Crie um clube com um nome único (ex: 'Clube de Xadrez Alfa').
  - **Act:** Faça uma requisição `GET /club?name=Alfa`.
  - **Assert:** Verifique se o status é `200`, se `total` é 1 e se o clube retornado é o 'Clube de Xadrez Alfa'.

- **`Deve retornar um array vazio se nenhum clube corresponder ao filtro`**
  - **Arrange:** Garanta que não existam clubes com o nome 'Clube Inexistente'.
  - **Act:** Faça uma requisição `GET /club?name=Inexistente`.
  - **Assert:** Verifique se o status é `200`, se `total` é 0 e se `data` é um array vazio.

- **`Deve paginar os resultados corretamente`**
  - **Arrange:** Crie 3 clubes.
  - **Act:** Faça uma requisição `GET /club?page=2&limit=2`.
  - **Assert:** Verifique se o status é `200`, se `total` é 3, e se a resposta contém apenas 1 clube.

## Critérios de Aceite
- O arquivo `test/club/search-clubs.e2e-spec.ts` foi criado.
- Todos os testes mínimos foram implementados e estão passando.
- Os testes são independentes e realizam o cleanup dos dados criados.

## Notas de versão/refs do Context7
- **Supertest:** `/ladjs/supertest`
- **Jest Expect:** `/jestjs/jest`
